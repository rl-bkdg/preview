(function(g){var window=this;'use strict';var U2=function(d){d.publish("autonavvisibility")},FlL=function(d,L){g.cg(d,"onAutonavCoundownStarted",L)},s2=function(d){return d.isBackground()&&d.M7()},Rqw=function(d,L){L=L.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.nextButton?.buttonRenderer;
d.Z=L?.navigationEndpoint;L=L?.trackingParams;d.playButton&&L&&d.X.setTrackingParams(d.playButton.element,L)},ZJ=function(d){const L=q6(d);
var I=Math,v=I.min;var F=d.B?Date.now()-d.B:0;I=v.call(I,F,L);lX(d,Math.ceil((L-I)/1E3));L-I<=500&&d.O()?d.select(!0):d.O()&&d.U.start()},N6=function(d){var L=d.X.RP(!0,d.X.isFullscreen());
g.h(d.container.element,"ytp-autonav-endscreen-small-mode",d.Ui(L));g.h(d.container.element,"ytp-autonav-endscreen-is-premium",!!d.suggestion&&!!d.suggestion.qD);g.h(d.X.getRootNode(),"ytp-autonav-endscreen-cancelled-state",!d.X.w0());g.h(d.X.getRootNode(),"countdown-running",d.O());g.h(d.container.element,"ytp-player-content",d.X.w0());g.xW(d.overlay.element,{width:`${L.width}px`});if(!d.O()){d.X.w0()?lX(d,Math.round(q6(d)/1E3)):lX(d);L=!!d.suggestion&&!!d.suggestion.f4;const I=d.X.w0()||!L;g.h(d.container.element,
"ytp-autonav-endscreen-upnext-alternative-header-only",!I&&L);g.h(d.container.element,"ytp-autonav-endscreen-upnext-no-alternative-header",I&&!L);d.K.VN(d.X.w0());g.h(d.element,"ytp-enable-w2w-color-transitions",!!d.X.getVideoData()?.watchToWatchTransitionRenderer)}},lX=function(d,L=-1){d=d.N.EU("ytp-autonav-endscreen-upnext-header");
g.yc(d);if(L>=0){L=String(L);const I="Up next in $SECONDS".match(RegExp("\\$SECONDS","gi"))[0],v="Up next in $SECONDS".indexOf(I);if(v>=0){d.appendChild(g.nO("Up next in $SECONDS".slice(0,v)));const F=g.HT("span");g.n7(F,"ytp-autonav-endscreen-upnext-header-countdown-number");g.ep(F,L);d.appendChild(F);d.appendChild(g.nO("Up next in $SECONDS".slice(v+I.length)));return}}g.ep(d,"Up next")},q6=function(d){return d.X.isFullscreen()?(d=d.X.getVideoData()?.Ww,d===-1||d===void 0?8E3:d):d.X.C4()>=0?d.X.C4():
g.rP(d.X.V().experiments,"autoplay_time")||1E4},M6=function(d,L){L=D3H(d,L);
var I=Math,v=I.min;var F=(0,g.q)()-d.B;I=v.call(I,F,L);L=L===0?1:Math.min(I/L,1);d.L1.setAttribute("stroke-dashoffset",`${-211*(L+1)}`);L>=1&&d.O()&&d.api.getPresentingPlayerType()!==3?d.select(!0):d.O()&&d.N.start()},D3H=function(d,L){return L?L:d.api.isFullscreen()?(d=d.api.getVideoData()?.Ww,d===-1||d===void 0?8E3:d):d.api.C4()>=0?d.api.C4():g.rP(d.api.V().experiments,"autoplay_time")||1E4},QY=function(d){const L=d.w0();
L!==d.B&&(d.B=L,U2(d.player),d.B?(d.W!==d.O&&d.W.hide(),d.table.hide()):(d.W!==d.O&&d.W.show(),d.table.show()))},c_=function(d){return g.eL(d.player)&&d.N()&&!d.L},VY=function(d){const L=d.w0();
L!==d.U&&(d.U=L,U2(d.player))},f1=function(d){return g.eL(d.player)&&d.N()&&!d.K},T6=function(d){const L=d.w0();
L!==d.Wy&&(d.Wy=L,U2(d.player))},OQb=function(d){d=d.V();
return d.Du&&!d.BJ&&!d.disableOrganicUi},bQx=function(d){const L=d.player.getVideoData();
if(!L||d.O===L.ye&&d.W===L.ej)return!1;d.O=L.ye;d.W=L.ej;return!0},HQn=function(d){d.player.Ba("endscreen");
var L=d.player.getVideoData();L=new g.GO(Math.max((L.lengthSeconds-10)*1E3,0),0x8000000000000,{id:"preload",namespace:"endscreen"});const I=new g.GO(0x8000000000000,0x8000000000000,{id:"load",priority:8,namespace:"endscreen"});d.player.sH([L,I])};
g.QJ.prototype.C4=g.Ii(9,function(){return this.app.C4()});
g.$7.prototype.C4=g.Ii(8,function(){return this.getVideoData().XJ});
g.M2.prototype.v0=g.Ii(7,function(d){this.k6().v0(d)});
g.nE.prototype.v0=g.Ii(6,function(d){this.W1!==d&&(this.W1=d,this.EA())});
var n2n=class extends g.f{constructor(d){const L=d.V(),I=L.N;super({S:"a",Y:"ytp-autonav-suggestion-card",D:{href:"{{url}}",target:I?L.U:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},J:[{S:"div",RL:["ytp-autonav-endscreen-upnext-thumbnail","ytp-autonav-thumbnail-small"],D:{style:"{{background}}"},J:[{S:"div",D:{"aria-label":"{{timestamp}}"},RL:["ytp-autonav-timestamp"],Py:"{{duration}}"},
{S:"div",RL:["ytp-autonav-live-stamp"],Py:"Live"},{S:"div",RL:["ytp-autonav-upcoming-stamp"],Py:"Upcoming"},{S:"div",Y:"ytp-autonav-list-overlay",J:[{S:"div",Y:"ytp-autonav-mix-text",Py:"Mix"},{S:"div",Y:"ytp-autonav-mix-icon"}]}]},{S:"div",RL:["ytp-autonav-endscreen-upnext-title","ytp-autonav-title-card"],Py:"{{title}}"},{S:"div",RL:["ytp-autonav-endscreen-upnext-author","ytp-autonav-author-card"],Py:"{{author}}"},{S:"div",RL:["ytp-autonav-endscreen-upnext-author","ytp-autonav-view-and-date-card"],
Py:"{{views_and_publish_time}}"}]});this.X=d;this.suggestion=null;this.O=I;this.listen("click",this.onClick);this.listen("keypress",this.onKeyPress)}select(){this.X.Vf(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.JH||void 0)&&this.X.logClick(this.element)}onClick(d){g.El(d,this.X,this.O,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(d){switch(d.keyCode){case 13:case 32:d.defaultPrevented||(this.select(),d.preventDefault())}}};var gA=class extends g.f{constructor(d,L=!1){super({S:"div",Y:"ytp-autonav-endscreen-countdown-overlay"});this.tU=L;this.cancelCommand=this.Z=void 0;this.B=0;this.container=new g.f({S:"div",Y:"ytp-autonav-endscreen-countdown-container"});g.G(this,this.container);this.container.g2(this.element);L=d.V();const I=L.N;this.X=d;this.suggestion=null;this.onVideoDataChange("newdata",this.X.getVideoData());this.A(d,"videodatachange",this.onVideoDataChange);this.N=new g.f({S:"div",Y:"ytp-autonav-endscreen-upnext-container",
D:{"aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},J:[{S:"div",Y:"ytp-autonav-endscreen-upnext-header"},{S:"div",Y:"ytp-autonav-endscreen-upnext-alternative-header",Py:"{{autoplayAlternativeHeader}}"},{S:"a",Y:"ytp-autonav-endscreen-link-container",D:{href:"{{url}}",target:I?L.U:""},J:[{S:"div",Y:"ytp-autonav-endscreen-upnext-thumbnail",D:{style:"{{background}}"},J:[{S:"div",D:{"aria-label":"{{timestamp}}"},
RL:["ytp-autonav-timestamp"],Py:"{{duration}}"},{S:"div",RL:["ytp-autonav-live-stamp"],Py:"Live"},{S:"div",RL:["ytp-autonav-upcoming-stamp"],Py:"Upcoming"}]},{S:"div",Y:"ytp-autonav-endscreen-video-info",J:[{S:"div",Y:"ytp-autonav-endscreen-premium-badge"},{S:"div",Y:"ytp-autonav-endscreen-upnext-title",Py:"{{title}}"},{S:"div",Y:"ytp-autonav-endscreen-upnext-author",Py:"{{author}}"},{S:"div",Y:"ytp-autonav-view-and-date",Py:"{{views_and_publish_time}}"},{S:"div",Y:"ytp-autonav-author-and-view",Py:"{{author_and_views}}"}]}]}]});
g.G(this,this.N);this.N.g2(this.container.element);I||this.A(this.N.EU("ytp-autonav-endscreen-link-container"),"click",this.N0);this.X.createClientVe(this.container.element,this,115127);this.X.createClientVe(this.N.EU("ytp-autonav-endscreen-link-container"),this,115128);this.overlay=new g.f({S:"div",Y:"ytp-autonav-overlay"});g.G(this,this.overlay);this.overlay.g2(this.container.element);this.K=new g.f({S:"div",Y:"ytp-autonav-endscreen-button-container"});g.G(this,this.K);this.K.g2(this.container.element);
this.cancelButton=new g.f({S:"button",RL:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-cancel-button","ytp-autonav-endscreen-upnext-button-rounded"],D:{"aria-label":"Cancel autoplay"},Py:"Cancel"});g.G(this,this.cancelButton);this.cancelButton.g2(this.K.element);this.cancelButton.listen("click",this.L1,this);this.X.createClientVe(this.cancelButton.element,this,115129);this.playButton=new g.f({S:"a",RL:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-play-button",
"ytp-autonav-endscreen-upnext-button-rounded"],D:{href:"{{url}}",role:"button","aria-label":"Play next video"},Py:"Play Now"});g.G(this,this.playButton);this.playButton.g2(this.K.element);this.playButton.listen("click",this.N0,this);this.X.createServerVe(this.playButton.element,this.playButton,!0);(L=this.X.getVideoData())&&Rqw(this,L);this.U=new g.Rk(()=>{ZJ(this)},500);
g.G(this,this.U);this.Wy();this.A(d,"autonavvisibility",this.Wy);this.X.C("web_autonav_color_transition")&&(this.A(d,"autonavchange",this.sU),this.A(d,"onAutonavCoundownStarted",this.Sj))}j(d){this.suggestion!==d&&(this.suggestion=d,g.Ru(this.N,d),this.playButton.updateValue("url",this.suggestion.jg()),N6(this))}O(){return this.B>0}L(){this.O()||(this.B=Date.now(),ZJ(this),FlL(this.X,q6(this)),g.h(this.X.getRootNode(),"countdown-running",this.O()))}G(){this.W();ZJ(this);const d=this.N.EU("ytp-autonav-endscreen-upnext-header");
d&&g.ep(d,"Up next")}W(){this.O()&&(this.U.stop(),this.B=0)}select(d=!1){this.X.nextVideo(!1,d);this.W()}N0(d){g.El(d,this.X)&&(d.currentTarget===this.playButton.element?this.X.logClick(this.playButton.element):d.currentTarget===this.N.EU("ytp-autonav-endscreen-link-container")&&(d=this.N.EU("ytp-autonav-endscreen-link-container"),this.X.logVisibility(d,!0),this.X.logClick(d)),this.Z?(g.cg(this.X,"innertubeCommand",this.Z),this.W()):this.select())}L1(){this.X.logClick(this.cancelButton.element);g.H3(this.X,
!0);this.cancelCommand&&g.cg(this.X,"innertubeCommand",this.cancelCommand)}onVideoDataChange(d,L){Rqw(this,L);this.cancelCommand=L.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.cancelButton?.buttonRenderer?.command}Sj(d){if(this.X.getVideoData()?.watchToWatchTransitionRenderer){var L=this.X.getVideoData().watchToWatchTransitionRenderer;const I=L?.fromColorPaletteDark,v=L?.toColorPaletteDark;I&&v&&(L=this.element,L.style.setProperty("--w2w-start-background-color",
g.T$(I.surgeColor)),L.style.setProperty("--w2w-start-primary-text-color",g.T$(I.primaryTitleColor)),L.style.setProperty("--w2w-start-secondary-text-color",g.T$(I.secondaryTitleColor)),L.style.setProperty("--w2w-end-background-color",g.T$(v.surgeColor)),L.style.setProperty("--w2w-end-primary-text-color",g.T$(v.primaryTitleColor)),L.style.setProperty("--w2w-end-secondary-text-color",g.T$(v.secondaryTitleColor)),L.style.setProperty("--w2w-animation-duration",`${d}ms`));g.h(this.element,"ytp-w2w-animate",
!0)}}sU(d){this.X.C("web_autonav_color_transition")&&d!==2&&g.h(this.element,"ytp-w2w-animate",!1)}Wy(){const d=this.X.w0();this.tU&&this.Fa!==d&&this.VN(d);N6(this);this.X.logVisibility(this.container.element,d);this.X.logVisibility(this.cancelButton.element,d);this.X.logVisibility(this.N.EU("ytp-autonav-endscreen-link-container"),d);this.X.logVisibility(this.playButton.element,d)}Ui(d){return d.width<400||d.height<459}};var X4=class extends g.f{constructor(d,L){super({S:"div",RL:["html5-endscreen","ytp-player-content",L||"base-endscreen"]});this.created=!1;this.player=d}create(){this.created=!0}destroy(){this.created=!1}N(){return!1}w0(){return!1}Z(){return!1}};var dl=class extends g.f{constructor(d){super({S:"div",RL:["ytp-upnext","ytp-player-content"],D:{"aria-label":"{{aria_label}}"},J:[{S:"div",Y:"ytp-cued-thumbnail-overlay-image",D:{style:"{{background}}"}},{S:"span",Y:"ytp-upnext-top",J:[{S:"span",Y:"ytp-upnext-header",Py:"Up Next"},{S:"span",Y:"ytp-upnext-title",Py:"{{title}}"},{S:"span",Y:"ytp-upnext-author",Py:"{{author}}"}]},{S:"a",Y:"ytp-upnext-autoplay-icon",D:{role:"button",href:"{{url}}","aria-label":"Play next video"},J:[{S:"svg",D:{height:"100%",
version:"1.1",viewBox:"0 0 72 72",width:"100%"},J:[{S:"circle",Y:"ytp-svg-autoplay-circle",D:{cx:"36",cy:"36",fill:"#fff","fill-opacity":"0.3",r:"31.5"}},{S:"circle",Y:"ytp-svg-autoplay-ring",D:{cx:"-36",cy:"36","fill-opacity":"0",r:"33.5",stroke:"#FFFFFF","stroke-dasharray":"211","stroke-dashoffset":"-211","stroke-width":"4",transform:"rotate(-90)"}},{S:"path",Y:"ytp-svg-fill",D:{d:"M 24,48 41,36 24,24 V 48 z M 44,24 v 24 h 4 V 24 h -4 z"}}]}]},{S:"span",Y:"ytp-upnext-bottom",J:[{S:"span",Y:"ytp-upnext-cancel"},
{S:"span",Y:"ytp-upnext-paused",Py:"Autoplay is paused"}]}]});this.api=d;this.cancelButton=null;this.L1=this.EU("ytp-svg-autoplay-ring");this.U=this.notification=this.N=this.suggestion=null;this.Z=new g.Rk(this.K,5E3,this);this.B=0;var L=this.EU("ytp-upnext-cancel");this.cancelButton=new g.f({S:"button",RL:["ytp-upnext-cancel-button","ytp-button"],D:{tabindex:"0","aria-label":"Cancel autoplay"},Py:"Cancel"});g.G(this,this.cancelButton);this.cancelButton.listen("click",this.N0,this);this.cancelButton.g2(L);
this.cancelButton&&this.api.createClientVe(this.cancelButton.element,this,115129);g.G(this,this.Z);this.api.createClientVe(this.element,this,18788);L=this.EU("ytp-upnext-autoplay-icon");this.A(L,"click",this.sU);this.api.createClientVe(L,this,115130);this.Wy();this.A(d,"autonavvisibility",this.Wy);this.A(d,"mdxnowautoplaying",this.Sj);this.A(d,"mdxautoplaycanceled",this.tU);g.h(this.element,"ytp-upnext-mobile",this.api.V().W)}K(){this.notification&&(this.Z.stop(),this.Ca(this.U),this.U=null,this.notification.close(),
this.notification=null)}j(d){this.suggestion=d;g.Ru(this,d,"hqdefault.jpg")}Wy(){this.VN(this.api.w0());this.api.logVisibility(this.element,this.api.w0());this.api.logVisibility(this.EU("ytp-upnext-autoplay-icon"),this.api.w0());this.cancelButton&&this.api.logVisibility(this.cancelButton.element,this.api.w0())}bU(){window.focus();this.K()}L(d){this.O()||(g.o$("a11y-announce",`${"Up Next"} ${this.suggestion.title}`),this.B=(0,g.q)(),this.N=new g.Rk(()=>{M6(this,d)},25),M6(this,d),FlL(this.api,D3H(this,
d)));
g.kK(this.element,"ytp-upnext-autoplay-paused")}hide(){super.hide()}O(){return!!this.N}G(){this.W();this.B=(0,g.q)();M6(this);g.yH(this.element,"ytp-upnext-autoplay-paused")}W(){this.O()&&(this.N.dispose(),this.N=null)}select(d=!1){if(this.api.V().C("autonav_notifications")&&d&&window.Notification&&typeof document.hasFocus==="function"){const L=Notification.permission;L==="default"?Notification.requestPermission():L!=="granted"||document.hasFocus()||(this.K(),this.notification=new Notification("Up Next",
{body:this.suggestion.title,icon:this.suggestion.Bm()}),this.U=this.A(this.notification,"click",this.bU),this.Z.start())}this.W();this.api.nextVideo(!1,d)}sU(d){!g.KO(this.cancelButton.element,d.target)&&g.El(d,this.api)&&(this.api.w0()&&this.api.logClick(this.EU("ytp-upnext-autoplay-icon")),this.select())}N0(){this.api.w0()&&this.cancelButton&&this.api.logClick(this.cancelButton.element);g.H3(this.api,!0)}Sj(d){this.api.getPresentingPlayerType();this.show();this.L(d)}tU(){this.api.getPresentingPlayerType();
this.W();this.hide()}F2(){this.W();this.K();super.F2()}};var y61=class extends X4{constructor(d){super(d,"autonav-endscreen");this.overlay=this.videoData=null;this.table=new g.f({S:"div",Y:"ytp-suggestion-panel",J:[{S:"div",RL:["ytp-autonav-endscreen-upnext-header","ytp-autonav-endscreen-more-videos"],Py:"More videos"}]});this.U=new g.f({S:"div",Y:"ytp-suggestions-container"});this.videos=[];this.G=null;this.B=this.j=!1;this.W=new gA(this.player);g.G(this,this.W);this.W.g2(this.element);d.getVideoData().ej?this.O=this.W:(this.O=new dl(d),g.KH(this.player,
this.O.element,4),g.G(this,this.O));this.overlay=new g.f({S:"div",Y:"ytp-autonav-overlay-cancelled-state"});g.G(this,this.overlay);this.overlay.g2(this.element);this.L=new g.LN(this);g.G(this,this.L);g.G(this,this.table);this.table.g2(this.element);this.table.show();g.G(this,this.U);this.U.g2(this.table.element);this.hide()}create(){super.create();this.L.A(this.player,"appresize",this.K);this.L.A(this.player,"onVideoAreaChange",this.K);this.L.A(this.player,"videodatachange",this.onVideoDataChange);
this.L.A(this.player,"autonavchange",this.Wy);this.L.A(this.player,"onAutonavCancelled",this.N0);this.onVideoDataChange()}show(){super.show();(this.j||this.G&&this.G!==this.videoData.clientPlaybackNonce)&&g.H3(this.player,!1);g.eL(this.player)&&this.N()&&!this.G?(QY(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3||s2(this.player.yC())&&this.player.C("web_player_pip_logging_fix")?this.O.select(!0):this.O.L():this.videoData.autonavState===3&&this.O.G()):(g.H3(this.player,
!0),QY(this));this.K()}hide(){super.hide();this.O.G();QY(this)}K(){var d=this.player.RP(!0,this.player.isFullscreen());QY(this);N6(this.W);g.h(this.element,"ytp-autonav-cancelled-small-mode",this.Ui(d));g.h(this.element,"ytp-autonav-cancelled-tiny-mode",this.NV(d));g.h(this.element,"ytp-autonav-cancelled-mini-mode",d.width<=400||d.height<=360);this.overlay&&g.xW(this.overlay.element,{width:`${d.width}px`});if(!this.B)for(d=0;d<this.videos.length;d++)g.h(this.videos[d].element,"ytp-suggestion-card-with-margin",
d%2===1)}onVideoDataChange(){var d=this.player.getVideoData();if(this.videoData!==d&&d){this.videoData=d;d=this.videoData.suggestions;var L=this.videoData.U();L&&(this.O.j(L),this.O!==this.W&&this.W.j(L));if(d&&d.length)for(let v=0;v<o2$.length;++v){var I=o2$[v];d&&d[I]&&(this.videos[v]=new n2n(this.player),L=this.videos[v],I=d[I],L.suggestion!==I&&(L.suggestion=I,g.Ru(L,I)),g.G(this,this.videos[v]),this.videos[v].g2(this.U.element))}this.K()}}Wy(d){d===1?(this.j=!1,this.G=this.videoData.clientPlaybackNonce,
this.O.W(),this.Fa&&this.K()):(this.j=!0,this.w0()&&(d===2?this.O.L():d===3&&this.O.G()))}N0(d){d?this.Wy(1):(this.G=null,this.j=!1)}N(){return this.videoData.autonavState!==1}Ui(d){return(d.width<910||d.height<459)&&!this.NV(d)&&!(d.width<=400||d.height<=360)}NV(d){return d.width<800&&!(d.width<=400||d.height<=360)}w0(){return this.Fa&&g.eL(this.player)&&this.N()&&!this.G}},o2$=[1,3,2,4];var r6n=class extends X4{constructor(d){super(d,"videowall-endscreen");this.X=d;this.stills=[];this.L=this.videoData=null;this.K=this.U=!1;this.Wy=null;g.yH(this.element,"modern-videowall-endscreen");this.W=new g.LN(this);g.G(this,this.W);this.B=new g.Rk(()=>{g.yH(this.element,"ytp-show-tiles")},0);
g.G(this,this.B);this.table=new g.BV({S:"div",Y:"ytp-modern-endscreen-content"});g.G(this,this.table);this.table.g2(this.element);d.getVideoData().ej?this.O=new gA(d,!0):this.O=new dl(d);g.G(this,this.O);g.KH(this.player,this.O.element,4);d.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var d=this.player.getVideoData();d&&(this.videoData=d);this.G();this.W.A(this.player,"appresize",this.G);this.W.A(this.player,"onVideoAreaChange",this.G);this.W.A(this.player,"videodatachange",
this.onVideoDataChange);this.W.A(this.player,"autonavchange",this.j);this.W.A(this.player,"onAutonavCancelled",this.N0);d=this.videoData.autonavState;d!==this.Wy&&this.j(d);this.W.A(this.element,"transitionend",this.sU)}destroy(){this.W.W();g.LB(this.stills);this.stills=[];super.destroy();g.kK(this.element,"ytp-show-tiles");this.B.stop();this.Wy=this.videoData.autonavState}N(){return this.videoData.autonavState!==1}show(){const d=this.Fa;super.show();g.kK(this.element,"ytp-show-tiles");this.player.V().W?
g.DL(this.B):this.B.start();(this.K||this.L&&this.L!==this.videoData.clientPlaybackNonce)&&g.H3(this.player,!1);c_(this)?(VY(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3||s2(this.player.yC())&&this.player.C("web_player_pip_logging_fix")?this.O.select(!0):this.O.L():this.videoData.autonavState===3&&this.O.G()):(g.H3(this.player,!0),VY(this));d!==this.Fa&&this.player.logVisibility(this.element,!0)}hide(){const d=this.Fa;super.hide();this.O.G();VY(this);d!==this.Fa&&this.player.logVisibility(this.element,
!1)}sU(d){d.target===this.element&&this.G()}G(){const d=this.videoData?.suggestions?.length?this.videoData?.suggestions:[this.videoData?.U()];if(d.length){var L=this.X.RP(!0,this.X.isFullscreen()),I=Math.floor((L.width-64+16)/(g.h8(L.width*.27,250,450)+16));L=Math.min(3,Math.floor((L.height-64)/((L.width-64-(I-1)*16)/I*.5625+70)));g.K7(this.element,["ytp-modern-endscreen-limit-rows-1","ytp-modern-endscreen-limit-rows-2","ytp-modern-endscreen-limit-rows-3"]);g.yH(this.element,`ytp-modern-endscreen-limit-rows-${L}`);
g.h(this.element,"ytp-modern-endscreen-single-item",I===1);g.h(this.element,"ytp-modern-endscreen-row-0",L===0);I=this.table.element;I.ariaLive="polite";this.O.j(this.videoData.U());this.O instanceof gA&&N6(this.O);g.h(this.element,"ytp-endscreen-takeover",c_(this));VY(this);L=0;I.ariaBusy="true";var v=d.length;for(let F=0;F<v;F++){const R=F%v;let D=this.stills[F];D||(D=new g.EsB(this.player),this.stills[F]=D,I.appendChild(D.element));g.hWF(D,d[R]);L++}this.stills.length=L}}onVideoDataChange(){const d=
this.player.getVideoData({playerType:1});this.videoData!==d&&(d?.U()?(this.videoData=d,this.G()):this.player.GS("missg",{vid:d?.videoId||"",cpn:d?.clientPlaybackNonce||""}))}Z(){return this.O.O()}j(d){d===1?(this.K=!1,this.L=this.videoData.clientPlaybackNonce,this.O.W(),this.Fa&&this.G()):(this.K=!0,this.Fa&&c_(this)&&(d===2?this.O.L():d===3&&this.O.G()))}N0(d){if(d){for(d=0;d<this.stills.length;d++)this.X.logVisibility(this.stills[d].element,!0);this.j(1)}else this.L=null,this.K=!1;this.G()}w0(){return this.Fa&&
c_(this)}};var kBQ=class extends X4{constructor(d){super(d,"subscribecard-endscreen");this.O=new g.f({S:"div",Y:"ytp-subscribe-card",J:[{S:"img",Y:"ytp-author-image",D:{src:"{{profilePicture}}"}},{S:"div",Y:"ytp-subscribe-card-right",J:[{S:"div",Y:"ytp-author-name",Py:"{{author}}"},{S:"div",Y:"html5-subscribe-button-container"}]}]});g.G(this,this.O);this.O.g2(this.element);const L=d.getVideoData();this.subscribeButton=new g.Xs("Subscribe",null,"Unsubscribe",null,!0,!1,L.hg,L.subscribed,"trailer-endscreen",null,
d,!1);g.G(this,this.subscribeButton);this.subscribeButton.g2(this.O.EU("html5-subscribe-button-container"));this.A(d,"videodatachange",this.YE);this.YE();this.hide()}YE(){const d=this.player.getVideoData();this.O.update({profilePicture:d.profilePicture,author:d.author});this.subscribeButton.channelId=d.hg;var L=this.subscribeButton;d.subscribed?L.O():L.W()}};var Klc=class extends g.f{constructor(d){const L=d.V(),I=g.Ff||g.rE?{style:"will-change: opacity"}:void 0,v=L.N,F=["ytp-videowall-still"];L.W&&F.push("ytp-videowall-show-text");super({S:"a",RL:F,D:{href:"{{url}}",target:v?L.U:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}"},J:[{S:"div",Y:"ytp-videowall-still-image",D:{style:"{{background}}"}},{S:"span",Y:"ytp-videowall-still-info",D:{"aria-hidden":"true"},J:[{S:"span",Y:"ytp-videowall-still-info-bg",
J:[{S:"span",Y:"ytp-videowall-still-info-content",D:I,J:[{S:"span",Y:"ytp-videowall-still-info-title",Py:"{{title}}"},{S:"span",Y:"ytp-videowall-still-info-author",Py:"{{author_and_views}}"},{S:"span",Y:"ytp-videowall-still-info-live",Py:"Live"},{S:"span",Y:"ytp-videowall-still-info-duration",Py:"{{duration}}"}]}]}]},{S:"span",RL:["ytp-videowall-still-listlabel-regular","ytp-videowall-still-listlabel"],D:{"aria-hidden":"true"},J:[{S:"span",Y:"ytp-videowall-still-listlabel-icon"},"Playlist",{S:"span",
Y:"ytp-videowall-still-listlabel-length",J:[" (",{S:"span",Py:"{{playlist_length}}"},")"]}]},{S:"span",RL:["ytp-videowall-still-listlabel-mix","ytp-videowall-still-listlabel"],D:{"aria-hidden":"true"},J:[{S:"span",Y:"ytp-videowall-still-listlabel-mix-icon"},"Mix",{S:"span",Y:"ytp-videowall-still-listlabel-length",Py:" (50+)"}]}]});this.suggestion=null;this.W=v;this.api=d;this.O=new g.LN(this);g.G(this,this.O);this.listen("click",this.onClick);this.listen("keypress",this.onKeyPress);this.O.A(d,"videodatachange",
this.onVideoDataChange);d.createServerVe(this.element,this);this.onVideoDataChange()}select(){this.api.Vf(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.JH||void 0)&&this.api.logClick(this.element)}onClick(d){if(g.zA(this.api.V())&&this.api.C("web_player_log_click_before_generating_ve_conversion_params")){this.api.logClick(this.element);let L=this.suggestion.jg();const I={};g.rp(this.api,I);L=g.WK(L,I);g.he(L,this.api,d)}else g.El(d,this.api,
this.W,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(d){switch(d.keyCode){case 13:case 32:d.defaultPrevented||(this.select(),d.preventDefault())}}onVideoDataChange(){const d=this.api.getVideoData(),L=this.api.V();this.W=d.FI?!1:L.N}};var eqH=class extends X4{constructor(d){super(d,"videowall-endscreen");this.X=d;this.L=0;this.stills=[];this.K=this.videoData=null;this.B=this.Wy=!1;this.N0=null;this.G=new g.LN(this);g.G(this,this.G);this.j=new g.Rk(()=>{g.yH(this.element,"ytp-show-tiles")},0);
g.G(this,this.j);var L=new g.f({S:"button",RL:["ytp-button","ytp-endscreen-previous"],D:{"aria-label":"Previous"},J:[g.eF()]});g.G(this,L);L.g2(this.element);L.listen("click",this.Sj,this);this.table=new g.BV({S:"div",Y:"ytp-endscreen-content"});g.G(this,this.table);this.table.g2(this.element);L=new g.f({S:"button",RL:["ytp-button","ytp-endscreen-next"],D:{"aria-label":"Next"},J:[g.WO()]});g.G(this,L);L.g2(this.element);L.listen("click",this.L1,this);d.getVideoData().ej?this.O=new gA(d,!0):this.O=
new dl(d);g.G(this,this.O);g.KH(this.player,this.O.element,4);d.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var d=this.player.getVideoData();d&&(this.videoData=d);this.W();this.G.A(this.player,"appresize",this.W);this.G.A(this.player,"onVideoAreaChange",this.W);this.G.A(this.player,"videodatachange",this.onVideoDataChange);this.G.A(this.player,"autonavchange",this.U);this.G.A(this.player,"onAutonavCancelled",this.sU);d=this.videoData.autonavState;d!==this.N0&&this.U(d);
this.G.A(this.element,"transitionend",this.tU)}destroy(){this.G.W();g.LB(this.stills);this.stills=[];super.destroy();g.kK(this.element,"ytp-show-tiles");this.j.stop();this.N0=this.videoData.autonavState}N(){return this.videoData.autonavState!==1}show(){const d=this.Fa;super.show();g.kK(this.element,"ytp-show-tiles");this.player.V().W?g.DL(this.j):this.j.start();(this.B||this.K&&this.K!==this.videoData.clientPlaybackNonce)&&g.H3(this.player,!1);f1(this)?(T6(this),this.videoData.autonavState===2?this.player.getVisibilityState()===
3||s2(this.player.yC())&&this.player.C("web_player_pip_logging_fix")?this.O.select(!0):this.O.L():this.videoData.autonavState===3&&this.O.G()):(g.H3(this.player,!0),T6(this));d!==this.Fa&&this.player.logVisibility(this.element,!0)}hide(){const d=this.Fa;super.hide();this.O.G();T6(this);d!==this.Fa&&this.player.logVisibility(this.element,!1)}tU(d){d.target===this.element&&this.W()}W(){var d=this.videoData?.suggestions?.length?this.videoData?.suggestions:[this.videoData?.U()];if(d.length){g.yH(this.element,
"ytp-endscreen-paginate");var L=this.X.RP(!0,this.X.isFullscreen()),I=g.I9(this.X);I&&(I=I.RK()?48:32,L.width-=I*2);var v=L.width/L.height,F=96/54,R=I=2,D=Math.max(L.width/96,2),O=Math.max(L.height/54,2),b=d.length;var H=b*4;for(H-=4;H>0&&(I<D||R<O);){var n=I/2,y=R/2,r=I<=D-2&&H>=y*4,k=R<=O-2&&H>=n*4;if((n+1)/y*F/v>v/(n/(y+1)*F)&&k)H-=n*4,R+=2;else if(r)H-=y*4,I+=2;else if(k)H-=n*4,R+=2;else break}F=!1;H>=12&&b*4-H<=6&&(R>=4||I>=4)&&(F=!0);H=I*96;D=R*54;v=H/D<v?L.height/D:L.width/H;v=Math.min(v,2);
H=Math.floor(Math.min(L.width,H*v));D=Math.floor(Math.min(L.height,D*v));L=this.table.element;L.ariaLive="polite";g.gK(L,H,D);g.xW(L,{marginLeft:`${H/-2}px`,marginTop:`${D/-2}px`});this.O.j(this.videoData.U());this.O instanceof gA&&N6(this.O);g.h(this.element,"ytp-endscreen-takeover",f1(this));T6(this);H+=4;D+=4;v=0;L.ariaBusy="true";for(O=0;O<I;O++)for(n=0;n<R;n++)if(r=v,k=0,F&&O>=I-2&&n>=R-2?k=1:n%2===0&&O%2===0&&(n<2&&O<2?n===0&&O===0&&(k=2):k=2),r=g.w3(r+this.L,b),k!==0){y=this.stills[v];y||(y=
new Klc(this.player),this.stills[v]=y,L.appendChild(y.element));var W=Math.floor(D*n/R);const P=Math.floor(H*O/I),z=Math.floor(D*(n+k)/R)-W-4,w=Math.floor(H*(O+k)/I)-P-4;g.Zq(y.element,P,W);g.gK(y.element,w,z);g.xW(y.element,"transitionDelay",(n+O)/20+"s");g.h(y.element,"ytp-videowall-still-mini",k===1);g.h(y.element,"ytp-videowall-still-large",k>2);k=Math.max(w,z);g.h(y.element,"ytp-videowall-still-round-large",k>=256);g.h(y.element,"ytp-videowall-still-round-medium",k>96&&k<256);g.h(y.element,"ytp-videowall-still-round-small",
k<=96);r=d[r];y.suggestion!==r&&(y.suggestion=r,k=y.api.V(),W=g.ok(y.element,"ytp-videowall-still-large")?"hqdefault.jpg":"mqdefault.jpg",g.Ru(y,r,W),g.zA(k)&&!y.api.C("web_player_log_click_before_generating_ve_conversion_params")&&(k=r.jg(),W={},g.Ti(y.api,"addEmbedsConversionTrackingParams",[W]),k=g.WK(k,W),y.updateValue("url",k)),(r=(r=r.sessionData)&&r.itct)&&y.api.setTrackingParams(y.element,r));v++}L.ariaBusy="false";g.h(this.element,"ytp-endscreen-paginate",v<b);for(d=this.stills.length-1;d>=
v;d--)I=this.stills[d],g.kW(I.element),g.dr(I);this.stills.length=v}}onVideoDataChange(){const d=this.player.getVideoData({playerType:1});this.videoData!==d&&(d?.U()?(this.L=0,this.videoData=d,this.W()):this.player.GS("missg",{vid:d?.videoId||"",cpn:d?.clientPlaybackNonce||""}))}L1(){this.L+=this.stills.length;this.W()}Sj(){this.L-=this.stills.length;this.W()}Z(){return this.O.O()}U(d){d===1?(this.B=!1,this.K=this.videoData.clientPlaybackNonce,this.O.W(),this.Fa&&this.W()):(this.B=!0,this.Fa&&f1(this)&&
(d===2?this.O.L():d===3&&this.O.G()))}sU(d){if(d){for(d=0;d<this.stills.length;d++)this.X.logVisibility(this.stills[d].element,!0);this.U(1)}else this.K=null,this.B=!1;this.W()}w0(){return this.Fa&&f1(this)}};var Wl8=class extends g.f{constructor(d){super({S:"button",RL:["ytp-watch-on-youtube-button","ytp-button"],Py:"{{content}}"});this.X=d;this.buttonType=this.buttonType=1;this.O();this.buttonType===2&&g.yH(this.element,"ytp-continue-watching-button");this.listen("click",this.onClick);this.listen("videodatachange",this.O);this.VN(!0)}O(){let d,L;switch(this.buttonType){case 1:d="Watch again on YouTube";L=156915;break;case 2:d="Continue watching on YouTube";L=156942;break;default:d="Continue watching on YouTube",
L=156942}this.update({content:d});this.X.hasVe(this.element)&&this.X.destroyVe(this.element);this.X.createClientVe(this.element,this,L)}onClick(d){this.X.C("web_player_log_click_before_generating_ve_conversion_params")&&this.X.logClick(this.element);g.he(this.getVideoUrl(),this.X,d);this.X.C("web_player_log_click_before_generating_ve_conversion_params")||this.X.logClick(this.element)}getVideoUrl(){var d=!0;switch(this.buttonType){case 1:d=!0;break;case 2:d=!1}d=this.X.getVideoUrl(d,!1,!1,!0);const L=
this.X.V();if(g.zA(L)){const I={};g.zA(L)&&g.Ti(this.X,"addEmbedsConversionTrackingParams",[I]);d=g.WK(d,I)}return d}logVisibility(){this.X.logVisibility(this.element,this.Fa&&this.md)}show(){super.show();this.logVisibility()}hide(){super.hide();this.logVisibility()}yG(d){super.yG(d);this.logVisibility()}};var aeQ=class extends X4{constructor(d){super(d,"watch-again-on-youtube-endscreen");this.watchButton=new Wl8(d);g.G(this,this.watchButton);this.watchButton.g2(this.element);g.no$(d)&&(this.O=new g.ow$(d),g.G(this,this.O),this.W=new g.f({S:"div",RL:["ytp-watch-again-on-youtube-endscreen-more-videos-container"],D:{tabIndex:"-1"},J:[this.O]}),g.G(this,this.W),this.O.g2(this.W.element),this.W.g2(this.element));d.createClientVe(this.element,this,156914);this.hide()}hasSuggestions(){return this.O?.hasSuggestions()}show(){if(this.player.getPlayerState()!==
3){super.show();const L=this.W;if(L){var d=this.O.hasSuggestions();g.h(this.element,"ytp-shorts-branded-ui",d);d?L.show():L.hide()}g.I9(this.player)?.v0(!0);this.player.logVisibility(this.element,!0);this.watchButton.yG(!0)}}hide(){super.hide();g.I9(this.player)?.v0(!1);this.player.logVisibility(this.element,!1);this.watchButton.yG(!1)}};g.au("endscreen",class extends g.WN{constructor(d){super(d);this.endScreen=null;this.O=this.W=this.G=!1;this.listeners=new g.LN(this);g.G(this,this.listeners);const L=d.V();d.isEmbedsShortsMode()?this.endScreen=new aeQ(d):OQb(d)?(this.G=!0,bQx(this),this.O?this.endScreen=new y61(d):L.C("delhi_modern_endscreen")?this.endScreen=new r6n(d):this.endScreen=new eqH(d)):L.BJ?this.endScreen=new kBQ(d):this.endScreen=new X4(d);g.G(this,this.endScreen);g.KH(d,this.endScreen.element,4);HQn(this);this.listeners.A(d,
"videodatachange",this.onVideoDataChange,this);this.listeners.A(d,g.WP("endscreen"),I=>{this.onCueRangeEnter(I)});
this.listeners.A(d,g.ad("endscreen"),I=>{this.onCueRangeExit(I)})}qL(){var d=this.player.getVideoData();
const L=d.mutedAutoplay&&(d.limitedPlaybackDurationInSeconds>0||d.endSeconds>0||d.mutedAutoplayDurationMode!==2);if(this.player.isEmbedsShortsMode()&&!L)return!0;var I=!(!d?.U()&&!d?.suggestions?.length);I=!OQb(this.player)||I;d=d.Vi;const v=this.player.v6();return I&&!d&&!v&&!L}w0(){return this.endScreen.w0()}nV(){return this.w0()?this.endScreen.Z():!1}F2(){this.player.Ba("endscreen");super.F2()}load(){{const I=this.player.getVideoData(),v=I.transitionEndpointAtEndOfStream;if(v&&v.videoId){var d=
this.player.tq().cJ.get("heartbeat");var L=I.U();!L||v.videoId!==L.videoId||I.w3?(this.player.Vf(v.videoId,void 0,void 0,!0,!0,v),d&&d.xx("HEARTBEAT_ACTION_TRIGGER_AT_STREAM_END","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT"),d=!0):d=!1}else d=!1}d||(super.load(),this.endScreen.show())}unload(){super.unload();this.endScreen.hide();this.endScreen.destroy()}onCueRangeEnter(d){this.qL()&&(this.endScreen.created||this.endScreen.create(),d.getId()==="load"&&this.load())}onCueRangeExit(d){d.getId()===
"load"&&this.loaded&&this.unload()}onVideoDataChange(){HQn(this);this.G&&bQx(this)&&(this.endScreen&&(this.endScreen.hide(),this.endScreen.created&&this.endScreen.destroy(),this.endScreen.dispose()),this.O?this.endScreen=new y61(this.player):this.endScreen=new eqH(this.player),g.G(this,this.endScreen),g.KH(this.player,this.endScreen.element,4))}});})(_yt_player);
